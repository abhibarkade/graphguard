name: Reusable Schema Publish

on:
  workflow_call:
    inputs:
      schema_path:
        required: true
        type: string
        description: "Path to the schema file"
      variant_id:
        required: true
        type: string
        description: "Target variant ID"
      version_label:
        required: true
        type: string
        description: "Version label (e.g. v1.0.1, commit-sha)"

jobs:
  publish-schema:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Publish Schema
        run: |
          echo "Publishing schema at ${{ inputs.schema_path }} to variant ${{ inputs.variant_id }} with label ${{ inputs.version_label }}"
          # In real implementation:
          # curl -X POST https://graphguard.internal/schema/publish \
          #   -H "x-variant-id: ${{ inputs.variant_id }}" \
          #   -H "Content-Type: application/json" \
          #   -d "{\"schema\": \"$(cat ${{ inputs.schema_path }})\", \"versionLabel\": \"${{ inputs.version_label }}\"}"
